{"version":3,"sources":["component/ValueBox.js","api/covid-19.js","component/ValueBoxGroup.js","component/App.js","index.js"],"names":["ValueBox","props","dayjs","de","mainContent","this","promiseInProgress","Statistic","size","Placeholder","style","width","Header","Line","color","cases7Per100k","Label","city","lastUpdated","format","Value","Math","round","Segment","raised","minWidth","maxWidth","height","React","Component","httpClient","axios","create","baseURL","params","get","ValueBoxGroup","handleClick","queryApi","state","essen","krefeld","solingen","setInterval","forEach","URLSearchParams","trackPromise","api","then","response","data","records","fields","updatedCity","cases7_per_100k","last_update","setState","catch","error","console","Container","as","dividing","Button","icon","className","title","onClick","Icon","name","Grid","Row","Column","promiseTrackerHoc","App","margin","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c64b76a9.chunk.js","sourcesContent":["import React from \"react\";\nimport { Statistic, Placeholder, Segment } from 'semantic-ui-react'\nimport * as dayjs from 'dayjs'\nimport de from 'dayjs/locale/de'\n\nexport default class ValueBox extends React.Component {\n    constructor(props) {\n      super(props);\n      dayjs.locale('de-german', de)\n    }\n\n    render() {\n      let mainContent;\n      if (this.props.promiseInProgress) {\n        mainContent = <Statistic size='huge'>\n            <Placeholder style={{ width: 220 }}>\n            <Placeholder.Header>\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n            </Placeholder.Header>\n            </Placeholder>\n          </Statistic>\n      } else {\n        let color = 'green';\n        if (this.props.cases7Per100k >= 200) {\n          color = 'red';\n        } else if (this.props.cases7Per100k >= 100) {\n          color = 'orange';\n        } else if (this.props.cases7Per100k >= 50 && this.props.cases7Per100k < 100) {\n          color = 'yellow';\n        }\n\n        mainContent = <Statistic size='huge' color={color}>\n          <Statistic.Label>{this.props.city}</Statistic.Label>\n          <p>Daten vom: {this.props.lastUpdated === \"\" ? \"unbekannt\" : dayjs(this.props.lastUpdated).format('dd. DD.MM.YYYY')}</p>\n          <Statistic.Value>{Math.round(this.props.cases7Per100k)}</Statistic.Value>\n        </Statistic>\n      }\n\n      return (<Segment raised style={{ minWidth: 250, maxWidth: 630, height: 166 }}>{mainContent}</Segment>);\n    }\n}\n","import axios from 'axios'\n\n// https://public.opendatasoft.com/explore/dataset/covid-19-germany-landkreise/api\nconst httpClient = axios.create({\n    baseURL: 'https://public.opendatasoft.com/api/records/1.0/search/'\n})\n\nexport default {\n  getCasesForOneWeek: params => httpClient.get('?dataset=covid-19-germany-landkreise', { params })\n}\n","import React from \"react\";\nimport { trackPromise, promiseTrackerHoc } from 'react-promise-tracker';\nimport { Container, Button, Icon, Grid, Header } from 'semantic-ui-react'\nimport ValueBox from \"./ValueBox\";\nimport api from '../api/covid-19'\n\nclass ValueBoxGroup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      essen: {\n        lastUpdated: \"\",\n        cases7Per100k: 0\n      },\n      krefeld: {\n        lastUpdated: \"\",\n        cases7Per100k: 0\n      },\n      solingen: {\n        lastUpdated: \"\",\n        cases7Per100k: 0\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.queryApi();\n    setInterval(() => this.queryApi(), 1000 * 60 * 60 * 6)\n  }\n\n  queryApi() {\n    const cities = [\"essen\", \"krefeld\", \"solingen\"];\n    cities.forEach ((city) => {\n      const params = new URLSearchParams([['q', city]]);\n      trackPromise(\n        api.getCasesForOneWeek(params).then(response => response.data.records[0].fields)\n          .then((data) => {\n            let updatedCity = {};\n            updatedCity.cases7Per100k = data.cases7_per_100k;\n            updatedCity.lastUpdated = data.last_update;\n            this.setState({ [`${city}`]: updatedCity })\n          })\n          .catch(error => {\n            console.error(error)\n          })\n      );\n  })}\n\n  handleClick = () => {\n    this.queryApi();\n  };\n\n  render() {    \n    return (\n      <Container>\n        <Header as='h1'>COVID-19-Erkrankung</Header>\n        <Header as='h5' dividing>pro 100.000 Einwohner in den letzten 7 Tagen</Header>\n        <Button icon className=\"ui right floated button\" title=\"aktualisieren\" onClick={this.handleClick}>\n          <Icon name=\"refresh\" />\n        </Button>\n        <div className='ui centered grid'>\n          <Grid>\n            <Grid.Row>\n              <Grid.Column>\n                <ValueBox\n                  city=\"Essen\"\n                  cases7Per100k={this.state.essen.cases7Per100k}\n                  lastUpdated={this.state.essen.lastUpdated}\n                  promiseInProgress={this.props.promiseInProgress}\n                />\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <Grid.Column>\n                <ValueBox\n                  city=\"Krefeld\"\n                  cases7Per100k={this.state.krefeld.cases7Per100k}\n                  lastUpdated={this.state.krefeld.lastUpdated}\n                  promiseInProgress={this.props.promiseInProgress}\n                />\n              </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n              <Grid.Column>\n              <ValueBox\n                city=\"Solingen\"\n                cases7Per100k={this.state.solingen.cases7Per100k}\n                lastUpdated={this.state.solingen.lastUpdated}\n                promiseInProgress={this.props.promiseInProgress}\n              />\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </div>\n        </Container>\n      )\n    };\n}\n\nexport default promiseTrackerHoc(ValueBoxGroup);\n","import React from \"react\";\nimport { Container } from \"semantic-ui-react\";\nimport ValueBoxGroup from \"./ValueBoxGroup\";\n\nexport default class App extends React.Component {\n    render() {\n      return (\n        <Container style={{ margin: 20 }}>\n          <ValueBoxGroup />\n        </Container>\n      );\n    }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css'\nimport App from \"./component/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}